(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{34:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return C})),n.d(e,"c",(function(){return L})),n.d(e,"a",(function(){return p}));var r=n(14),c=n.n(r),a=n(19),o=n(13),u=n.n(o),s=n(2),i=Object(s.b)("contacts/fetchContactsRequest"),b=Object(s.b)("contacts/fetchContactsSuccess"),l=Object(s.b)("contacts/fetchContactsError"),j=Object(s.b)("contacts/addContactRequest"),d=Object(s.b)("contacts/addContactSuccess"),O=Object(s.b)("contacts/addContactError"),f=Object(s.b)("contacts/deleteContactRequest"),h=Object(s.b)("contacts/deleteContactSuccess"),g=Object(s.b)("contacts/deleteContactError"),p=Object(s.b)("contacts/changeFilter");u.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var v,x,m={fetchContacts:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(i()),t.prev=1,t.next=4,u.a.get("/contacts");case 4:n=t.sent,r=n.data,e(b(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(l(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addContact:function(t){return function(e){var n={name:t.name,number:t.number};e(j()),u.a.post("/contacts",n).then((function(t){var n=t.data;return e(d(n))})).catch((function(t){return e(O(t.message))}))}},deleteContact:function(t){return function(e){e(f()),u.a.delete("/contacts/".concat(t)).then((function(){return e(h(t))})).catch((function(t){return e(g(t.message))}))}}},k=n(23),y=function(t){return t.contacts.filter},C={getLoading:function(t){return t.contacts.loading},getContacts:function(t){return t.contacts},getFilter:y,getFilteredContacts:Object(k.a)([function(t){return t.contacts.items},y],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}))},S=n(3),A=n(25),E=n(6),U=Object(s.c)([],(v={},Object(S.a)(v,b,(function(t,e){return e.payload})),Object(S.a)(v,d,(function(t,e){var n=e.payload;return[].concat(Object(A.a)(t),[n])})),Object(S.a)(v,h,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),v)),w=Object(s.c)(!1,(x={},Object(S.a)(x,i,(function(){return!0})),Object(S.a)(x,b,(function(){return!1})),Object(S.a)(x,l,(function(){return!1})),Object(S.a)(x,j,(function(){return!0})),Object(S.a)(x,d,(function(){return!1})),Object(S.a)(x,O,(function(){return!1})),Object(S.a)(x,f,(function(){return!0})),Object(S.a)(x,h,(function(){return!1})),Object(S.a)(x,g,(function(){return!1})),x)),R=Object(s.c)("",Object(S.a)({},p,(function(t,e){return e.payload}))),q=Object(s.c)(null,{}),L=Object(E.c)({items:U,filter:R,loading:w,error:q})},8:function(t,e,n){"use strict";n.d(e,"b",(function(){return g})),n.d(e,"a",(function(){return S})),n.d(e,"c",(function(){return A}));var r,c,a,o,u=n(2),s={registerRequest:Object(u.b)("auth/registerRequest"),registerSuccess:Object(u.b)("auth/registerSuccess"),registerError:Object(u.b)("auth/registerError"),loginRequest:Object(u.b)("auth/loginRequest"),loginSuccess:Object(u.b)("auth/loginSuccess"),loginError:Object(u.b)("auth/loginError"),logoutRequest:Object(u.b)("auth/logoutRequest"),logoutSuccess:Object(u.b)("auth/logoutSuccess"),logoutError:Object(u.b)("auth/logoutError"),getCurrentUserRequest:Object(u.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(u.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(u.b)("auth/getCurrentUserError")},i=n(3),b=n(6),l={name:null,email:null},j=Object(u.c)(l,(r={},Object(i.a)(r,s.registerSuccess,(function(t,e){return e.payload.user})),Object(i.a)(r,s.loginSuccess,(function(t,e){return e.payload.user})),Object(i.a)(r,s.logoutSuccess,(function(t,e){return l})),Object(i.a)(r,s.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),d=Object(u.c)(null,(c={},Object(i.a)(c,s.registerSuccess,(function(t,e){return e.payload.token})),Object(i.a)(c,s.loginSuccess,(function(t,e){return e.payload.token})),Object(i.a)(c,s.logoutSuccess,(function(t,e){return null})),c)),O=function(t,e){return e.payload},f=Object(u.c)(null,(a={},Object(i.a)(a,s.registerError,O),Object(i.a)(a,s.loginError,O),Object(i.a)(a,s.logoutError,O),Object(i.a)(a,s.getCurrentUserError,O),a)),h=Object(u.c)(!1,(o={},Object(i.a)(o,s.registerSuccess,(function(){return!0})),Object(i.a)(o,s.loginSuccess,(function(){return!0})),Object(i.a)(o,s.getCurrentUserSuccess,(function(){return!0})),Object(i.a)(o,s.registerError,(function(){return!1})),Object(i.a)(o,s.loginError,(function(){return!1})),Object(i.a)(o,s.getCurrentUserError,(function(){return!1})),Object(i.a)(o,s.logoutSuccess,(function(){return!1})),o)),g=Object(b.c)({user:j,isAuthenticated:h,token:d,error:f}),p=n(14),v=n.n(p),x=n(19),m=n(13),k=n.n(m);k.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var y=function(t){k.a.defaults.headers.common.Authorization="Bearer ".concat(t)},C=function(){k.a.defaults.headers.common.Authorization=""},S={register:function(t){return function(){var e=Object(x.a)(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(s.registerRequest()),e.prev=1,e.next=4,k.a.post("/users/signup",t);case 4:r=e.sent,y(r.data.token),n(s.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(s.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(x.a)(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(s.loginRequest()),e.prev=1,e.next=4,k.a.post("/users/login",t);case 4:r=e.sent,y(r.data.token),n(s.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(s.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(x.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(s.logoutRequest()),t.prev=1,t.next=4,k.a.post("/users/logout");case 4:C(),e(s.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(s.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(x.a)(v.a.mark((function t(e,n){var r,c,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return y(c),e(s.getCurrentUserRequest()),t.prev=5,t.next=8,k.a.get("/users/current");case 8:a=t.sent,e(s.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(s.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},A={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name}}},82:function(t,e,n){},85:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(22),o=n.n(a),u=n(31),s=n(32),i=n(35),b=n(33),l=n(5),j=n(9),d=n(16),O=n(8),f=n(1),h={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},g=Object(j.b)((function(t){return{isAuthenticated:O.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(f.jsx)("nav",{children:e?Object(f.jsx)(d.b,{to:"/contacts",exact:!0,style:h.link,activeStyle:h.activeLink,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0430\u044f \u043a\u043d\u0438\u0433\u0430"}):Object(f.jsx)(d.b,{to:"/",exact:!0,style:h.link,activeStyle:h.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})})})),p=n.p+"static/media/default-avatar.e44fc4e2.png",v={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},x={onLogout:O.a.logOut},m=Object(j.b)((function(t){return{name:O.c.getUsername(t),avatar:p}}),x)((function(t){var e=t.avatar,n=t.name,r=t.onLogout;return Object(f.jsxs)("div",{style:v.container,children:[Object(f.jsx)("img",{src:e,alt:"",width:"32",style:v.avatar}),Object(f.jsxs)("span",{style:v.name,children:["Welcome, ",n]}),Object(f.jsx)("button",{type:"button",onClick:r,children:"\u0412\u044b\u0439\u0442\u0438"})]})})),k={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},y=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(d.b,{to:"/register",exact:!0,style:k.link,activeStyle:k.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(f.jsx)(d.b,{to:"/login",exact:!0,style:k.link,activeStyle:k.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},C={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},S=Object(j.b)((function(t){return{isAuthenticated:O.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(f.jsxs)("header",{style:C.header,children:[Object(f.jsx)(g,{}),e?Object(f.jsx)(m,{}):Object(f.jsx)(y,{})]})})),A=(n(82),function(t){var e=t.children;return Object(f.jsx)("div",{className:"Container",children:e})}),E=n(18),U=n(24),w=Object(j.b)((function(t){return{isAuthenticated:O.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(U.a)(t,["component","isAuthenticated","redirectTo"]);return Object(f.jsx)(l.b,Object(E.a)(Object(E.a)({},c),{},{render:function(t){return n?Object(f.jsx)(e,Object(E.a)({},t)):Object(f.jsx)(l.a,{to:r})}}))})),R=Object(j.b)((function(t){return{isAuthenticated:O.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(U.a)(t,["component","isAuthenticated","redirectTo"]);return Object(f.jsx)(l.b,Object(E.a)(Object(E.a)({},c),{},{render:function(t){return n&&c.restricted?Object(f.jsx)(l.a,{to:r}):Object(f.jsx)(e,Object(E.a)({},t))}}))})),q=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,99))})),L=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,100))})),I=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,101))})),T=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,102))})),z=function(t){Object(i.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(f.jsxs)(A,{children:[Object(f.jsx)(S,{}),Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(f.jsxs)(l.d,{children:[Object(f.jsx)(R,{exact:!0,path:"/",component:q}),Object(f.jsx)(R,{path:"/register",restricted:!0,redirectTo:"/contacts",component:L}),Object(f.jsx)(R,{path:"/login",restricted:!0,redirectTo:"/contacts",component:I}),Object(f.jsx)(w,{path:"/contacts",redirectTo:"/login",component:T})]})})]})}}]),n}(r.Component),B={onGetCurrentUser:O.a.getCurrentUser},F=Object(j.b)(null,B)(z),W=n(25),D=n(2),G=n(17),J=n(47),M=n.n(J),N=n(34),H=Object(W.a)(Object(D.d)({serializableCheck:{ignoredActions:[G.a,G.f,G.b,G.c,G.d,G.e]}})),K={key:"auth",storage:M.a,whitelist:["token"]},P=Object(D.a)({reducer:{auth:Object(G.g)(K,O.b),contacts:N.c},middleware:H,devTools:!1}),Q=Object(G.h)(P),V=n(48);o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(j.a,{store:P,children:Object(f.jsx)(V.a,{loading:null,persistor:Q,children:Object(f.jsx)(d.a,{children:Object(f.jsx)(F,{})})})})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.2199c1a4.chunk.js.map